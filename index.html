<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Escape Grid</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="team-select">
      <img src="main-image.png" alt="Description of image" width="300" />
      <h2>Select Your Minion</h2>
      <select id="team-dropdown">
        <option value="">-- Select your MINION --</option>
        <option value="team1">Bob</option>
        <option value="team2">Dave</option>
        <option value="team3">Kevin</option>
        <option value="team4">Stuart</option>
        <option value="team5">Phil</option>
        <option value="team1">Carl</option>
        <option value="team2">Otto</option>
        <option value="team3">Mel</option>
        <option value="team4">Bee-do</option>
        <option value="team5">Mark</option>
      </select>
      <br /><br />
      <button onclick="startGame()">Start</button>
    </div>

    <div id="game-container">
      <h2 id="team-name">Minion: Bob</h2>
      <div class="grid" id="grid">
        <div class="column" id="col-1"></div>
        <div class="column" id="col-2"></div>
        <div class="column" id="col-3"></div>
      </div>
      <img class="bottomImg" src="bottom.png" alt="minionssssssss" />
    </div>

    <script>
      const teamData = {
        team1: [
          { question: "Bob & Carl Q1", answer: "1" },
          { question: "Bob & Carl Q2", answer: "1" },
          { question: "Bob & Carl Q3", answer: "1" },
          { question: "Bob & Carl Q4", answer: "1" },
          { question: "Bob & Carl Q5", answer: "1" },
          { question: "Bob & Carl Q6", answer: "1" },
          { question: "Bob & Carl Q7", answer: "1" },
          { question: "Bob & Carl Q8", answer: "1" },
          { question: "Bob & Carl Q9", answer: "1" },
        ],
        team2: [
          { question: "Dave & Otto Q1", answer: "1" },
          { question: "Dave & Otto Q2", answer: "1" },
          { question: "Dave & Otto Q3", answer: "1" },
          { question: "Dave & Otto Q4", answer: "1" },
          { question: "Dave & Otto Q5", answer: "1" },
          { question: "Dave & Otto Q6", answer: "1" },
          { question: "Dave & Otto Q7", answer: "1" },
          { question: "Dave & Otto Q8", answer: "1" },
          { question: "Dave & Otto Q9", answer: "1" },
        ],
        team3: [
          { question: "Kevin & Mel Q1", answer: "1" },
          { question: "Kevin & Mel Q2", answer: "1" },
          { question: "Kevin & Mel Q3", answer: "1" },
          { question: "Kevin & Mel Q4", answer: "1" },
          { question: "Kevin & Mel Q5", answer: "1" },
          { question: "Kevin & Mel Q6", answer: "1" },
          { question: "Kevin & Mel Q7", answer: "1" },
          { question: "Kevin & Mel Q8", answer: "1" },
          { question: "Kevin & Mel Q9", answer: "1" },
        ],
        team4: [
          { question: "Stuart & Bee-do Q1", answer: "1" },
          { question: "Stuart & Bee-do Q2", answer: "1" },
          { question: "Stuart & Bee-do Q3", answer: "1" },
          { question: "Stuart & Bee-do Q4", answer: "1" },
          { question: "Stuart & Bee-do Q5", answer: "1" },
          { question: "Stuart & Bee-do Q6", answer: "1" },
          { question: "Stuart & Bee-do Q7", answer: "1" },
          { question: "Stuart & Bee-do Q8", answer: "1" },
          { question: "Stuart & Bee-do Q9", answer: "1" },
        ],
        team5: [
          { question: "Phil & Mark Q1", answer: "1" },
          { question: "Phil & Mark Q2", answer: "1" },
          { question: "Phil & Mark Q3", answer: "1" },
          { question: "Phil & Mark Q4", answer: "1" },
          { question: "Phil & Mark Q5", answer: "1" },
          { question: "Phil & Mark Q6", answer: "1" },
          { question: "Phil & Mark Q7", answer: "1" },
          { question: "Phil & Mark Q8", answer: "1" },
          { question: "Phil & Mark Q9", answer: "1" },
        ],
      };

      const columnImages = ["agnes.png", "pony.png", "banana.png"];

      function startGame() {
        const dropdown = document.getElementById("team-dropdown");
        const team = dropdown.value;
        const teamLabel = dropdown.options[dropdown.selectedIndex].text;

        if (!team || !teamData[team])
          return alert("Please select a valid team");

        document.getElementById("team-select").style.display = "none";
        document.getElementById("game-container").style.display = "block";
        document.getElementById("team-name").textContent = `${teamLabel}`;

        const columns = document.querySelectorAll(".column");
        columns.forEach((col, i) => {
          col.innerHTML = "";
          col.style.setProperty("--bg-image", `url('${columnImages[i]}')`);
          col.classList.remove("revealed");
        });

        // Fill 3 tiles per column
        teamData[team].forEach(({ question, answer }, index) => {
          const tile = document.createElement("div");
          tile.className = "tile";
          tile.setAttribute("data-answer", answer.toLowerCase());
          tile.innerHTML = `<p>${question}</p><input type="text" oninput="check(this)">`;

          const colIndex = Math.floor(index / 3); // 0, 1, or 2
          document.getElementById(`col-${colIndex + 1}`).appendChild(tile);
        });
      }

      function check(input) {
        const tile = input.parentElement;
        const correct = tile.getAttribute("data-answer").toLowerCase();
        const attempt = input.value.trim().toLowerCase();

        if (attempt === correct) {
          tile.classList.add("revealed");
          checkColumnComplete(tile.closest(".column"));
        }
      }

      function checkColumnComplete(column) {
        const tiles = column.querySelectorAll(".tile");
        const allRevealed = Array.from(tiles).every((tile) =>
          tile.classList.contains("revealed")
        );
        if (allRevealed) {
          column.classList.add("revealed");
        }
      }
    </script>
  </body>
</html>
